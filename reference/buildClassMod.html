<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>build image classification model (random forest) — buildClassMod • urbanAnnualRunoff</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="build image classification model (random forest) — buildClassMod" />
<meta property="og:description" content="Wrapper function for fitting a random forest using a multi-band
image with the purpose of classifying pixels into roof, street, and pervious
(green areas, water surface), etc. These categories are defined by the user
in the ground truth data. Training and testing are done using repeated
cross-validation with package caret" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">urbanAnnualRunoff</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/workflow_beijing.html">Workflow: Beijing</a>
    </li>
    <li>
      <a href="../articles/workflow_jinxi.html">Workflow: Jinxi</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/KWB-R/urbanAnnualRunoff/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>build image classification model (random forest)</h1>
    <small class="dont-index">Source: <a href='https://github.com/KWB-R/urbanAnnualRunoff/blob/master/R/imgClass.R'><code>R/imgClass.R</code></a></small>
    <div class="hidden name"><code>buildClassMod.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Wrapper function for fitting a random forest using a multi-band
image with the purpose of classifying pixels into roof, street, and pervious
(green areas, water surface), etc. These categories are defined by the user
in the ground truth data. Training and testing are done using repeated
cross-validation with package caret</p>
    </div>

    <pre class="usage"><span class='fu'>buildClassMod</span><span class='op'>(</span>
  <span class='va'>rawdir</span>,
  <span class='va'>image</span>,
  <span class='va'>groundTruth</span>,
  groundTruthValues <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>roof <span class='op'>=</span> <span class='fl'>1</span>, street <span class='op'>=</span> <span class='fl'>2</span>, pervious <span class='op'>=</span> <span class='fl'>3</span>, shadow <span class='op'>=</span> <span class='fl'>4</span>, water <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>,
  overlayExists <span class='op'>=</span> <span class='cn'>FALSE</span>,
  <span class='va'>spectrSigName</span>,
  <span class='va'>modelName</span>,
  nCores <span class='op'>=</span> <span class='fu'>parallel</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/parallel/detectCores.html'>detectCores</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>-</span> <span class='fl'>1</span>,
  <span class='va'>mtryGrd</span>,
  <span class='va'>ntreeGrd</span>,
  nfolds <span class='op'>=</span> <span class='fl'>3</span>,
  nodesize <span class='op'>=</span> <span class='fl'>3</span>,
  cvrepeats <span class='op'>=</span> <span class='fl'>2</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>rawdir</th>
      <td><p>path to directory containing the image to be classified and the
ground truth data.</p></td>
    </tr>
    <tr>
      <th>image</th>
      <td><p>The image to be classified. Supported formats are given in the
raster package's brick function.</p></td>
    </tr>
    <tr>
      <th>groundTruth</th>
      <td><p>shapefile containing polygons indicating the observed
classes of a sample of pixels. These classes must be contained in a column
named 'cover' in the shape-file's attribute table. The table may contain
further columns.</p></td>
    </tr>
    <tr>
      <th>groundTruthValues</th>
      <td><p>list with key value pairs (default: list('roof' = 1,
'street' = 2, 'pervious' = 3, 'shadow' = 4, 'water' = 5))</p></td>
    </tr>
    <tr>
      <th>overlayExists</th>
      <td><p>If FALSE, the function overlays the ground truth data
and the image (time consuming) and saves an R object containing the former's
spectral signatures with name spectrSigName (overlay object). If TRUE, the
function will skip this overlay operation and read an existing overlay object
with name 'spectrSigName'. (default: FALSE)</p></td>
    </tr>
    <tr>
      <th>spectrSigName</th>
      <td><p>File name of overlay object, either for saving a new or
load an existing file.</p></td>
    </tr>
    <tr>
      <th>modelName</th>
      <td><p>File name for saving the fitted random forest model</p></td>
    </tr>
    <tr>
      <th>nCores</th>
      <td><p>no. of cores for running in parallel mode (uses library
'doParallel'), (default: parallel::detectCores() - 1)</p></td>
    </tr>
    <tr>
      <th>mtryGrd</th>
      <td><p>Number of trees to grow. In the random forests literature, this
is referred to as the ntree parameter. Larger number of trees produce more
stable models and covariate importance estimates, but require more memory and
a longer run time. For small datasets, 50 trees may be sufficient. For larger
datasets, 500 or more may be required. Please consult the random forests
literature for extensive discussion of this parameter (e.g. Cutler et al., 2007;
Strobl et al., 2007; Strobl et al., 2008).</p></td>
    </tr>
    <tr>
      <th>ntreeGrd</th>
      <td><p>Number of variables available for splitting at each tree node.
In the random forests literature, this is referred to as the mtry parameter.
There is extensive discussion in the literature about the influence of mtry.
Cutler et al. (2007) reported that different values of mtry did not affect
the correct classification rates of their model and that other performance
metrics (sensitivity, specificity, kappa, and ROC AUC) were stable under
different values of mtry. On the other hand, Strobl et al. (2008) reported
that mtry had a strong influence on predictor variable importance estimates.</p></td>
    </tr>
    <tr>
      <th>nfolds</th>
      <td><p>number of folds in repeated cross validation (caret),
(default: 3)</p></td>
    </tr>
    <tr>
      <th>nodesize</th>
      <td><p>a single value (not included in grid search), (default: 3)</p></td>
    </tr>
    <tr>
      <th>cvrepeats</th>
      <td><p>number of repeats in repeated cross validation (caret),
(default: 2)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Writes spectralSignatures (if overlayExists is FALSE) and fitted random
forest model with name modelName.</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/robetatis'>Roberto Tatis-Muvdi</a>, <a href='https://mrustl.de'>Michael Rustler</a>, <a href='https://www.kompetenz-wasser.de/en/project/keys/'><img src='https://www.kompetenz-wasser.de/wp-content/uploads/2018/09/keys-logo.png' height='24' /></a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '3b4f8dee7a78052bd10dd954369f2c28',
    indexName: 'urbanAnnualRunoff',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


